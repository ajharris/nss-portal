{% extends "base.html" %}
{% from "bootstrap/wtf.html" import form_field %}

{% block page_content %}
<div class="container">
    <h2>Event: {{ event.showName }}</h2>

    {% if current_user.is_admin or current_user.is_account_manager %}
    <div id="request-crew-section">
        <h3>Request Crew</h3>
        <form method="POST" action="{{ url_for('events.view_event', event_id=event.id) }}">
            {{ crew_request_form.hidden_tag() }}
            <div class="form-row">
                <div class="form-group col-md-6">
                    {{ form_field(crew_request_form.start_time, class="form-control datetimepicker") }}
                </div>
                <div class="form-group col-md-6">
                    {{ form_field(crew_request_form.end_time, class="form-control datetimepicker") }}
                </div>
            </div>
            <div class="form-group">
                {{ form_field(crew_request_form.description, class="form-control") }}
            </div>
            <div class="form-group">
                <label>Roles</label>
                <div class="horizontal-role-group">
                    {% for role_form in crew_request_form.roles %}
                        <div class="form-group role-entry">
                            <label>Role: {{ role_form.role.data }}</label>
                            {{ role_form.role }}
                            <label for="number-{{ loop.index0 }}">{{ role_form.number.label.text }}</label>
                            {{ role_form.number(class="form-control", id="number-{{ loop.index0 }}") }}
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="form-group">
                <label>Shift Type</label>
                <div class="horizontal-checkbox-group">
                    {% for shift in crew_request_form.shiftType %}
                        <div class="form-check form-check-inline">
                            {{ shift(class="form-check-input") }}
                            <label class="form-check-label">{{ shift.label }}</label>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="form-group">
                {{ form_field(crew_request_form.submit, class="btn btn-primary") }}
            </div>
        </form>
    </div>
    {% endif %}

    <h3>Notes</h3>
    <form method="POST" action="{{ url_for('events.view_event', event_id=event.id) }}">
        {{ note_form.hidden_tag() }}
        <div class="form-group">
            {{ form_field(note_form.notes, class="form-control") }}
        </div>
        <div class="form-group">
            {{ form_field(note_form.submit, class="btn btn-primary") }}
        </div>
    </form>

    <h3>Documents</h3>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('events.view_event', event_id=event.id) }}">
        {{ document_form.hidden_tag() }}
        <div class="form-group">
            {{ form_field(document_form.document, class="form-control") }}
        </div>
        <div class="form-group">
            {{ form_field(document_form.submit, class="btn btn-primary") }}
        </div>
    </form>

    <h3>SharePoint</h3>
    <form method="POST" action="{{ url_for('events.view_event', event_id=event.id) }}">
        {{ sharepoint_form.hidden_tag() }}
        <div class="form-group">
            {{ form_field(sharepoint_form.sharepoint_link, class="form-control") }}
        </div>
        <div class="form-group">
            {{ form_field(sharepoint_form.submit, class="btn btn-primary") }}
        </div>
    </form>
</div>

<style>
    .horizontal-role-group {
        display: flex;
        flex-wrap: wrap;
    }
    .role-entry {
        flex: 1;
        min-width: 200px;
        margin-bottom: 15px;
    }
    .form-check-inline {
        margin-right: 15px;
        margin-bottom: 10px;
    }
</style>
{% endblock %}
